<ion-header [translucent]="true">
  <ion-toolbar class="custom-toolbar">
    <ion-title class="custom-title">
      <div class="header-content">
        <h1>âœ¨ TaskFlow</h1>
        <p>Your premium task companion</p>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="main-content">
  <div class="floating-particles" #particles></div>

  <!-- Stats Section -->
  <div class="stats-container">
    <div class="stats-grid">
      <div class="stat-card" [class.animate]="statsAnimating">
        <div class="stat-number">{{ totalTasks }}</div>
        <div class="stat-label">Total</div>
      </div>
      <div class="stat-card" [class.animate]="statsAnimating">
        <div class="stat-number">{{ completedTasks }}</div>
        <div class="stat-label">Done</div>
      </div>
      <div class="stat-card" [class.animate]="statsAnimating">
        <div class="stat-number">{{ pendingTasks }}</div>
        <div class="stat-label">Pending</div>
      </div>
    </div>
  </div>

  <!-- Add Task Section -->
  <div class="add-task-section">
    <div class="input-container">
      <ion-item class="task-input-item" lines="none">
        <ion-input 
          [(ngModel)]="newTaskText" 
          placeholder="What needs to be done?"
          (keyup.enter)="addTask()"
          class="task-input"
          [class.success-border]="showSuccessBorder">
        </ion-input>
      </ion-item>
      <ion-button 
        (click)="addTask()" 
        class="add-button"
        expand="block"
        fill="clear">
        <ion-icon name="add" slot="start"></ion-icon>
        Add Task
      </ion-button>
    </div>
  </div>

  <!-- Tasks List -->
  <div class="tasks-section">
    <div *ngIf="tasks.length === 0" class="empty-state">
      <ion-icon name="checkmark-circle-outline" class="empty-icon"></ion-icon>
      <h3>ðŸŽ‰ All caught up!</h3>
      <p>You have no tasks pending. Time to add some goals and crush them!</p>
    </div>

    <div class="tasks-list" *ngIf="tasks.length > 0">
      <div 
        *ngFor="let task of tasks; trackBy: trackByTaskId" 
        class="task-item"
        [class.completed]="task.completed"
        [class.task-enter]="task.isNew"
        [class.task-exit]="task.isDeleting">
        
        <div class="task-checkbox-container">
          <div 
            class="task-checkbox"
            [class.checked]="task.completed"
            (click)="toggleTask(task)">
            <ion-icon 
              name="checkmark" 
              *ngIf="task.completed"
              class="check-icon">
            </ion-icon>
          </div>
        </div>

        <div class="task-content">
          <div class="task-text" [class.completed]="task.completed">
            {{ task.text }}
          </div>
          <div class="task-time">{{ task.createdAt | date:'short' }}</div>
        </div>

        <ion-button 
          fill="clear" 
          size="small"
          class="delete-button"
          (click)="deleteTask(task)">
          <ion-icon name="trash-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Floating Action Button (Alternative) -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed" class="custom-fab">
    <ion-fab-button class="fab-button" (click)="scrollToTop()">
      <ion-icon name="arrow-up"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>